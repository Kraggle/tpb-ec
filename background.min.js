console.log=function(){},chrome.browserAction.onClicked.addListener(()=>{newTab("https://episodecalendar.com")});const newTab=url=>{chrome.tabs.query({active:!0},tabs=>{let index=tabs[0].index;chrome.tabs.create({url:url,index:index+1})})},proxies="http://ettvproxies.com/";let item;function getLink(item,part){return!!isValid(item[part])&&$.ajax({url:item[part]}).done((function(data){item[part]="string"===$.type(data)?$(".download_link.magnet",data).attr("href"):""}))}function isValid(url){let pattern;return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(url)}function stripShit(data){return data.replace(/<(style|head|script).{0,}?>[\s\S]+?<\/(style|head|script)>/gi,"").replace(/<(link|img|meta).+?>/gi,"")}chrome.runtime.onMessage.addListener((function(request,sender,sendResponse){return console.log(request),request.getLinks&&request.item?(item=request.item,$.when(getLink(item,"mStandard"),getLink(item,"m1080"),getLink(item,"m1080HEVC"),getLink(item,"m720"),getLink(item,"m720HEVC")).done((function(a1,a2,a3,a4,a5){sendResponse({item:item})}))):request.getLink&&request.item&&request.type?(item=request.item,$.when(getLink(item,request.type)).done((function(){sendResponse({item:item})}))):request.url?(console.log("doing url",request.url),$.ajax({type:"GET",url:request.url}).done((function(a){console.log("url success",a),sendResponse({success:a})})).fail((function(){console.log("url error"),sendResponse({error:!0})}))):request.proxies?$.ajax({url:proxies}).done((function(a){let html=$.parseHTML(a),proxy=[];$("table.proxies td a",html).each((function(){proxy.push($(this).attr("href").replace(/\/$/,"")),console.log($(this))})),sendResponse(proxy[0])})):sendResponse({error:!0}),!0}));
//# sourceMappingURL=background.min.js.map